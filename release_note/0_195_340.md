# v0.195.340 - Tabインデント時の行位置ずれ修正（混合ネストリスト）

## 課題

リスト項目でTabインデントを実行すると、前の兄弟liに異なる型のネストリスト（例: `<ul>` + `<ol>`）が存在する場合、行の視覚的な位置が変わってしまう。

### 再現手順

```
- a
  - b
    - c
    1. d
  - f   ← ここでTab
```

期待: f はインデントされるが、d の後ろ（末尾）に留まる。
実際: f が c の直後（d の上）に移動してしまう。

## 原因

`indentListItem()` 関数内で `prevSibling.querySelector('ul, ol')` を使用していたため、前の兄弟liに複数のネストリスト（`<ul>` と `<ol>` など）がある場合、**最初のリスト**のみを返していた。

CLAUDE.md Section 16「`querySelector` は最初のマッチしか返さない」に該当する問題。

### 影響箇所（3箇所）

1. `indentListItem()` 本体 (editor.js:10537)
2. 複数選択時のTabインデント (editor.js:7279)
3. クロスリスト境界インデント (editor.js:10516)

## 対策

### 設計

`querySelector('ul, ol')` を `querySelectorAll(':scope > ul, :scope > ol')` に変更し、最後の子リストを取得する。`:scope >` で直接の子要素のみに限定し、深いネストのリストを誤って取得しないようにする。

### 実装

3箇所すべてで同じパターンの修正:

```javascript
// Before
let nestedList = prevSibling.querySelector('ul, ol');

// After
const nestedLists = prevSibling.querySelectorAll(':scope > ul, :scope > ol');
let nestedList;
if (nestedLists.length > 0) {
    nestedList = nestedLists[nestedLists.length - 1];
} else {
    nestedList = document.createElement(parentList.tagName.toLowerCase());
    prevSibling.appendChild(nestedList);
}
```

### テスト

`test/specs/tab-indent-mixed-list.spec.ts` に6テストケースを追加:
- ul+ol, ol+ul, task+ol, ul+ol(ol側) の4つの混合パターン
- 単一ネストリスト、ネストリストなしの2つの正常系

全544テストパス（既存538 + 新規6）、回帰なし。
