# v0.195.334 リリースノート

## コードブロック編集モードのShift+Tabデインデント修正

### 課題
コードブロック編集モードで、インデント付き行の末尾でEnterを押した後、上の行に戻ってShift+Tabを押してもデインデントが動作しない。

### 原因
Shift+Tabハンドラ（フォールバック部分）が`range.startContainer.nodeType === 3`（テキストノード）のみ処理していた。`insertLineBreak`後にカーソルが要素ノード（`<code>`要素、`nodeType === 1`）に配置される場合があり、その際にShift+Tab処理が完全にスキップされていた。

### 対策

**設計:**
- `curNode.nodeType === 1`の場合、`childNodes[curOffset]`から実際のテキストノードを解決するフォールバックを追加

**実装:**
- `src/webview/editor.js` のShift+Tabフォールバックハンドラ（7320-7344行付近）に要素ノード解決ロジックを追加
  - `childNodes[offset]`がテキストノード → そのまま使用
  - `childNodes[offset]`がBR → 次の兄弟テキストノードを使用
  - offset末尾 → 直前のテキストノードにフォールバック
- テスト4件追加（`codeblock-shift-tab.spec.ts`）
- CLAUDE.md Section 20 追加
