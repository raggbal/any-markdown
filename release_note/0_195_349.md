# v0.195.349 リリースノート

## キーボードショートカット追加: Toggle Source Mode / Open in Text Editor

### 課題
- Toggle Source Mode と Open in Text Editor はツールバーボタンからのみ操作可能で、キーボードショートカットが未設定だった
- キーボード中心のワークフローでモード切替やテキストエディタ切替が不便

### 対策

#### 設計
- Any Markdownエディタがアクティブな時のみ有効な `when` 条件付きキーバインドを追加
- Toggle Source Mode は既存のWebview内 `toggleSourceMode()` 関数をVSCodeコマンド経由で呼び出す構成

| 機能 | Mac | Windows/Linux |
|---|---|---|
| Toggle Source Mode | `Cmd+/` | `Ctrl+/` |
| Open in Text Editor | `Cmd+.` | `Ctrl+.` |

VSCodeデフォルトでは `Cmd+/` = Toggle Line Comment、`Cmd+.` = Quick Fix だが、`when: activeCustomEditorId == 'any-markdown.editor'` 条件により WYSIWYGエディタアクティブ時のみ上書きされる。

#### 実装
1. **package.json**: `any-markdown.toggleSourceMode` コマンド登録 + 2つのkeybindings追加
2. **extension.ts**: `any-markdown.toggleSourceMode` コマンドハンドラ登録（`provider.sendToggleSourceMode()` 呼び出し）
3. **editorProvider.ts**: `sendToggleSourceMode()` メソッド追加（Webviewに `toggleSourceMode` メッセージ送信）
4. **editor.js**: メッセージ受信ハンドラに `toggleSourceMode` タイプ追加（既存の `toggleSourceMode()` 関数を呼び出し）
5. **Open in Text Editor**: 既存の `any-markdown.openAsText` コマンドにkeybindingを追加するのみ
